<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portfolio Alejandra</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800;900&family=Allura&display=swap" rel="stylesheet">

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

:root {
    --text-primary: #1a1a1a;
    --bg-primary: #fafafa;
}

body {
    font-family: 'Outfit', sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
}

.hero {
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

.title-container {
    position: relative;
    text-align: center;
    cursor: pointer;
}

.title-main {
    font-size: clamp(3.5rem, 12vw, 10rem);
    font-weight: 900;
    letter-spacing: -0.04em;
    line-height: 0.85;
    transition: opacity .4s ease;
}

.title-script {
    font-family: 'Allura', cursive;
    font-size: clamp(2.5rem, 8vw, 6rem);
    margin-top: -1rem;
    transition: opacity .4s ease;
}

canvas {
    position: absolute;
    inset: 0;
    pointer-events: none;
    opacity: 0;
    transition: opacity .4s ease;
}

.title-container:hover canvas { opacity: 1; }
.title-container:hover .title-main,
.title-container:hover .title-script { opacity: 0; }
</style>
</head>

<body>

<section class="hero">
    <div class="title-container" id="title">
        <canvas id="canvas"></canvas>
        <div class="title-main" id="tMain">PORTFOLIO</div>
        <div class="title-script" id="tScript">Alejandra</div>
    </div>
</section>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const title = document.getElementById("title");
const tMain = document.getElementById("tMain");
const tScript = document.getElementById("tScript");

let bgPixels = [];
let textPixels = [];
let hover = false;
let time = 0;

/* ---------- RESIZE ---------- */
function resize() {
    const r = title.getBoundingClientRect();
    canvas.width = r.width;
    canvas.height = r.height;
}
resize();
window.addEventListener("resize", resize);

/* ---------- BACKGROUND PIXELS ---------- */
class BgPixel {
    constructor(x,y,s) {
        this.x = x; this.y = y;
        this.bx = x; this.by = y;
        this.s = s;
        this.p = Math.random()*Math.PI*2;
        this.a = 4 + Math.random()*10;
        this.sp = 0.002 + Math.random()*0.003;
    }
    update(t){
        this.x = this.bx + Math.sin(t*this.sp + this.p)*this.a;
        this.y = this.by + Math.cos(t*this.sp + this.p)*this.a;
    }
    draw(){
        ctx.fillStyle = "rgba(26,26,26,0.25)";
        ctx.fillRect(this.x,this.y,this.s,this.s);
    }
}

function createBackground() {
    bgPixels = [];
    const density = 4;
    for(let y=0;y<canvas.height;y+=density){
        for(let x=0;x<canvas.width;x+=density){
            if(Math.random()>0.15){
                bgPixels.push(new BgPixel(x,y,2));
            }
        }
    }
}

/* ---------- TEXT PIXELIZATION ---------- */
function createTextPixels() {
    textPixels = [];
    const tmp = document.createElement("canvas");
    const tctx = tmp.getContext("2d");
    tmp.width = canvas.width;
    tmp.height = canvas.height;

    tctx.fillStyle = "#000";
    tctx.textAlign = "center";

    tctx.font = `900 ${tMain.offsetHeight}px Outfit`;
    tctx.fillText("PORTFOLIO", tmp.width/2, tMain.offsetHeight);

    tctx.font = `400 ${tScript.offsetHeight}px Allura`;
    tctx.fillText("Alejandra", tmp.width/2, tMain.offsetHeight + tScript.offsetHeight - 20);

    const img = tctx.getImageData(0,0,tmp.width,tmp.height).data;
    const step = 3;

    for(let y=0;y<tmp.height;y+=step){
        for(let x=0;x<tmp.width;x+=step){
            const i = (y*tmp.width + x)*4;
            if(img[i+3] > 120){
                textPixels.push({x,y,s:step});
            }
        }
    }
}

/* ---------- ANIMATION ---------- */
function animate(){
    if(!hover) return;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    time++;

    // fondo primero
    bgPixels.forEach(p => { p.update(time); p.draw(); });

    // texto encima
    ctx.fillStyle = "rgba(26,26,26,0.9)";
    textPixels.forEach(p => {
        ctx.fillRect(p.x,p.y,p.s-0.5,p.s-0.5);
    });

    requestAnimationFrame(animate);
}

/* ---------- EVENTS ---------- */
title.addEventListener("mouseenter",()=>{
    hover = true;
    createBackground();
    createTextPixels();
    animate();
});

title.addEventListener("mouseleave",()=>{
    hover = false;
    ctx.clearRect(0,0,canvas.width,canvas.height);
});
</script>

</body>
</html>

